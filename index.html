<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <!-- ØªÙˆØ§ÙÙ‚ Ø§Ù„Ø¹Ø±Ø¶ Ù…Ø¹ Ø§Ù„Ù…ÙˆØ¨Ø§ÙŠÙ„ -->
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>ØªØ®Ø·ÙŠØ· Ø§Ù„Ù…Ù‡Ø§Ù…</title>
  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <!-- Ù…Ù„Ù manifest Ù„Ù„ØªØ«Ø¨ÙŠØª -->
  <link rel="manifest" href="manifest.json">
  <style>
    /* ØªÙ†Ø³ÙŠÙ‚ Ø§Ù„Ø­Ø§Ù„Ø© */
    .status-red { background-color: #ffcccc; }
    .status-yellow { background-color: #ffffcc; }
    .status-green { background-color: #ccffcc; }
    .task-card { transition: all 0.3s; }
    .task-card:hover { transform: scale(1.02); }
    /* Ø¥Ø²Ø§Ù„Ø© Ø³Ù‡Ù… datalist */
    input[list] {
      -webkit-appearance: none;
      -moz-appearance: none;
      appearance: none;
    }
    /* ØªÙ†Ø³ÙŠÙ‚ Ø§Ù„Ù…Ù‡Ù…Ø© Ø§Ù„Ù…ÙƒØªÙ…Ù„Ø© (Ù„Ù„Ù…Ù‡Ø§Ù… Ø§Ù„Ù…ØªÙƒØ±Ø±Ø©) */
    .completed {
      text-decoration: line-through;
      color: gray;
    }
    /* ØªÙ†Ø³ÙŠÙ‚ Ø±Ø¤ÙˆØ³ Ø§Ù„Ø£Ù‚Ø³Ø§Ù… Ø¨Ø¯ÙˆÙ† Ø®Ø·ÙˆØ· */
    .section-header {
      text-align: center;
      margin: 30px 0 20px;
      font-weight: bold;
    }
    /* Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ø£Ù‚Ø³Ø§Ù… Ø¨Ø¯ÙˆÙ† Ø­Ø¯ÙˆØ¯ Ø­ÙˆÙ„ Ø§Ù„Ø¹Ù†Ø§ÙˆÙŠÙ† */
    .content-section {
      padding: 20px;
      margin-bottom: 30px;
      background-color: #fff;
      border-radius: 8px;
    }
    /* Ø§Ø³ØªØ¹Ù„Ø§Ù… ÙˆØ³Ø§Ø¦Ø· Ù„ØªØ¹Ø¯ÙŠÙ„ Ø­Ø¬Ù… Ø§Ù„Ø®Ø·ÙˆØ· Ø¹Ù„Ù‰ Ø§Ù„Ù…ÙˆØ¨Ø§ÙŠÙ„ */
    @media (max-width: 576px) {
      body { font-size: 14px; }
      .display-4 { font-size: 2.5rem; }
      .section-header { font-size: 1.5rem; }
      .card-title { font-size: 1.25rem; }
      .lead { font-size: 1rem; }
    }
  </style>
</head>
<body class="bg-light">
  <div class="container py-4">
    <!-- Ø±Ø£Ø³ Ø§Ù„ØµÙØ­Ø© -->
    <header class="mb-4 text-center">
      <h1 class="display-4 text-primary">ØªØ®Ø·ÙŠØ· Ø§Ù„Ù…Ù‡Ø§Ù… ğŸ“š</h1>
      <p class="lead text-muted">Ù†Ø¸Ù… ÙˆÙ‚ØªÙƒ ÙˆØ­Ù‚Ù‚ Ø£Ù‡Ø¯Ø§ÙÙƒ Ù…Ø¹ Ù†Ø¸Ø§Ù… Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ù‡Ø§Ù… Ø§Ù„Ø°ÙƒÙŠ!</p>
    </header>

    <!-- Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ… Ù…Ø¹ Ù…Ù„Ø®Øµ Ø§Ù„ÙŠÙˆÙ… -->
    <section class="dashboard content-section">
      <h2 class="section-header">Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…</h2>
      <div id="dashboardSummary" class="card shadow-sm">
        <!-- Ø³ÙŠØªÙ… ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…Ø­ØªÙˆÙ‰ Ø¯ÙŠÙ†Ø§Ù…ÙŠÙƒÙŠÙ‹Ø§ -->
      </div>
    </section>

    <!-- Ø¥Ø¶Ø§ÙØ© Ù…Ù‡Ù…Ø© Ø¬Ø¯ÙŠØ¯Ø© -->
    <section class="add-task content-section">
      <h2 class="section-header">Ø¥Ø¶Ø§ÙØ© Ù…Ù‡Ù…Ø© Ø¬Ø¯ÙŠØ¯Ø©</h2>
      <form id="taskForm" class="row g-3">
        <div class="col-md-6">
          <label for="taskName" class="form-label">Ø§Ø³Ù… Ø§Ù„Ù…Ù‡Ù…Ø©</label>
          <input type="text" class="form-control" id="taskName" placeholder="Ø£Ø¯Ø®Ù„ Ø§Ø³Ù… Ø§Ù„Ù…Ù‡Ù…Ø©" required>
        </div>
        <div class="col-md-6">
          <label for="taskCategory" class="form-label">Ø§Ù„ØªØµÙ†ÙŠÙ</label>
          <input list="categories" class="form-control" id="taskCategory" placeholder="Ø£Ø¯Ø®Ù„ Ø§Ù„ØªØµÙ†ÙŠÙ" required>
          <datalist id="categories">
            <option value="Ø¯Ø±Ø§Ø³ÙŠ">
            <option value="Ø´Ø®ØµÙŠ">
            <option value="Ø¹Ù…Ù„ ØªØ·ÙˆØ¹ÙŠ">
            <option value="Ø±ÙŠØ§Ø¶ÙŠ">
            <option value="Ø§Ø¬ØªÙ…Ø§Ø¹ÙŠ">
          </datalist>
        </div>
        <div class="col-md-12">
          <label for="taskDetails" class="form-label">Ø§Ù„ØªÙØ§ØµÙŠÙ„</label>
          <textarea class="form-control" id="taskDetails" placeholder="Ø£Ø¯Ø®Ù„ ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ù…Ù‡Ù…Ø©" rows="2"></textarea>
        </div>
        <!-- Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ù…Ù‡Ù…Ø© Ø§Ù„Ù…ØªÙƒØ±Ø±Ø© -->
        <div class="col-md-12">
          <div class="form-check">
            <input class="form-check-input" type="checkbox" id="taskRecurring">
            <label class="form-check-label" for="taskRecurring">Ù…Ù‡Ù…Ø© Ù…ØªÙƒØ±Ø±Ø© ÙŠÙˆÙ…ÙŠÙ‹Ø§</label>
          </div>
        </div>
        <!-- Ø§Ù„Ø­Ù‚ÙˆÙ„ Ø§Ù„Ø®Ø§ØµØ© Ø¨Ø§Ù„Ù…Ù‡Ø§Ù… ØºÙŠØ± Ø§Ù„Ù…ØªÙƒØ±Ø±Ø© -->
        <div id="nonRecurringFields" class="row g-3 nonRecurringFields">
          <div class="col-md-4">
            <label for="startDate" class="form-label">Ù…ÙˆØ¹Ø¯ Ø§Ù„Ø¨Ø¯Ø¡</label>
            <input type="datetime-local" class="form-control" id="startDate">
          </div>
          <div class="col-md-4">
            <label for="endDate" class="form-label">Ù…ÙˆØ¹Ø¯ Ø§Ù„Ø§Ù†ØªÙ‡Ø§Ø¡</label>
            <input type="datetime-local" class="form-control" id="endDate">
          </div>
          <div class="col-md-4">
            <label for="deadline" class="form-label">Ù…ÙˆØ¹Ø¯ Ø§Ù„ØªØ³Ù„ÙŠÙ…</label>
            <input type="datetime-local" class="form-control" id="deadline">
          </div>
          <!-- Ø®Ø§Ù†Ø© Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ø­Ø§Ù„Ø© ØªØ¸Ù‡Ø± Ø£Ø³ÙÙ„ Ø§Ù„ØªÙˆØ§Ø±ÙŠØ® -->
          <div class="col-md-12">
            <label for="taskStatus" class="form-label">Ø§Ù„Ø­Ø§Ù„Ø©</label>
            <select class="form-select" id="taskStatus">
              <option class="status-red" value="Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¨Ø¯Ø¡">Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¨Ø¯Ø¡</option>
              <option class="status-yellow" value="Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªÙ†ÙÙŠØ°">Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªÙ†ÙÙŠØ°</option>
              <option class="status-green" value="ØªÙ… Ø§Ù„Ø§Ù†ØªÙ‡Ø§Ø¡">ØªÙ… Ø§Ù„Ø§Ù†ØªÙ‡Ø§Ø¡</option>
            </select>
          </div>
        </div>
        <div class="col-12">
          <button type="submit" class="btn btn-primary" id="submitBtn">Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ù‡Ù…Ø©</button>
          <button type="button" class="btn btn-secondary" id="cancelEditBtn" style="display:none;">Ø¥Ù„ØºØ§Ø¡ Ø§Ù„ØªØ¹Ø¯ÙŠÙ„</button>
        </div>
      </form>
    </section>

    <!-- Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ù‡Ø§Ù… -->
    <section class="task-list content-section">
      <h2 class="section-header">Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ù‡Ø§Ù…</h2>
      <div class="mb-3">
        <input type="text" id="taskSearch" class="form-control" placeholder="Ø§Ø¨Ø­Ø« Ø¹Ù† Ù…Ù‡Ù…Ø©...">
      </div>
      <!-- ØªØ±ØªÙŠØ¨ Ø§Ù„ØªØ­ÙƒÙ…: Ø£ÙˆÙ„Ø§Ù‹ Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ø­Ø§Ù„Ø© Ø«Ù… ØªØ±ØªÙŠØ¨ Ø­Ø³Ø¨ -->
      <div class="mb-3">
        <select id="filterStatus" class="form-select">
          <option value="">Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ø§Ù„Ø§Øª</option>
          <option value="Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¨Ø¯Ø¡">Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¨Ø¯Ø¡</option>
          <option value="Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªÙ†ÙÙŠØ°">Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªÙ†ÙÙŠØ°</option>
          <option value="ØªÙ… Ø§Ù„Ø§Ù†ØªÙ‡Ø§Ø¡">ØªÙ… Ø§Ù„Ø§Ù†ØªÙ‡Ø§Ø¡</option>
        </select>
      </div>
      <div class="mb-3">
        <select id="sortBy" class="form-select">
          <option value="startDate">ØªØ±ØªÙŠØ¨ Ø­Ø³Ø¨ Ù…ÙˆØ¹Ø¯ Ø§Ù„Ø¨Ø¯Ø¡</option>
          <option value="endDate">ØªØ±ØªÙŠØ¨ Ø­Ø³Ø¨ Ù…ÙˆØ¹Ø¯ Ø§Ù„Ø§Ù†ØªÙ‡Ø§Ø¡</option>
          <option value="deadline">ØªØ±ØªÙŠØ¨ Ø­Ø³Ø¨ Ù…ÙˆØ¹Ø¯ Ø§Ù„ØªØ³Ù„ÙŠÙ…</option>
        </select>
      </div>
      <div class="mb-3">
        <button id="clearTasksBtn" class="btn btn-danger btn-sm">Ù…Ø³Ø­ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ù‡Ø§Ù…</button>
      </div>
      <div id="allTasks"></div>
    </section>
  </div>

  <!-- ØªØ³Ø¬ÙŠÙ„ Service Worker Ù„ØªÙØ¹ÙŠÙ„ Ø§Ù„Ø£ÙˆÙÙ„Ø§ÙŠÙ† ÙˆØ§Ù„ØªØ«Ø¨ÙŠØª -->
  <script>
    if ('serviceWorker' in navigator) {
      navigator.serviceWorker.register('sw.js')
        .then(registration => console.log('Service Worker registered:', registration))
        .catch(error => console.log('Service Worker registration failed:', error));
    }
  </script>

  <!-- ÙƒÙˆØ¯ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ -->
  <script>
    let tasks = JSON.parse(localStorage.getItem('tasks')) || [];
    let editIndex = -1; // Ù…Ø¤Ø´Ø± Ø§Ù„Ù…Ù‡Ù…Ø© Ø§Ù„ØªÙŠ ÙŠØªÙ… ØªØ¹Ø¯ÙŠÙ„Ù‡Ø§

    // Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ø­Ø§Ù„Ø© Ø§Ù„Ù…Ù‡Ø§Ù… Ø§Ù„Ù…ØªÙƒØ±Ø±Ø© ÙŠÙˆÙ…ÙŠÙ‹Ø§
    function resetRecurringTasks() {
      const todayStr = new Date().toISOString().split('T')[0];
      const lastReset = localStorage.getItem('lastResetDate');
      if (lastReset !== todayStr) {
        tasks.forEach(task => {
          if (task.recurring) {
            task.completed = false;
          }
        });
        localStorage.setItem('lastResetDate', todayStr);
        saveTasks();
      }
    }

    function saveTasks() {
      localStorage.setItem('tasks', JSON.stringify(tasks));
    }

    // Ø¹Ø±Ø¶ Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ… Ù…Ø¹ Ø¯Ù…Ø¬ Ù…Ù„Ø®Øµ Ø§Ù„ÙŠÙˆÙ… ÙˆØ§Ù„Ù…Ù‡Ø§Ù…
    function renderDashboard() {
      resetRecurringTasks();
      const today = new Date();

      // Ø§Ø³ØªØ®Ø¯Ø§Ù… tasks Ù…Ø¨Ø§Ø´Ø±Ø© Ù…Ø¹ map Ù„Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø§Ù„ÙÙ‡Ø±Ø³ Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠ Ù„ÙƒÙ„ Ù…Ù‡Ù…Ø© Ù…ØªÙƒØ±Ø±Ø©
      const recurringHTML = tasks.reduce((html, task, index) => {
        if (task.recurring) {
          return html + `
            <div class="form-check mb-2">
              <input class="form-check-input" type="checkbox" id="recurringTask${index}" onchange="toggleRecurring(${index})" ${task.completed ? 'checked' : ''}>
              <label class="form-check-label ${task.completed ? 'completed' : ''}" for="recurringTask${index}">
                <strong>${task.name}</strong> - ${task.category}<br>
                <small>${task.details || ''}</small>
              </label>
            </div>
          `;
        }
        return html;
      }, "");

      // Ø§Ù„Ù…Ù‡Ø§Ù… ØºÙŠØ± Ø§Ù„Ù…ØªÙƒØ±Ø±Ø© Ø¶Ù…Ù† ÙØªØ±Ø© Ø§Ù„ÙŠÙˆÙ…
      const nonRecurringTasks = tasks.filter(task =>
        !task.recurring &&
        new Date(task.startDate) <= today &&
        new Date(task.deadline) >= today
      );
      const nonRecurringHTML = nonRecurringTasks.map(task => `
        <div class="task-card alert ${getStatusClass(task.status)} mb-2">
          <strong>${task.name}</strong> - ${task.category}<br>
          <small>${task.details || ''}</small>
        </div>
      `).join("");

      document.getElementById('dashboardSummary').innerHTML = `
        <div class="card-body">
          <h5 class="card-title">Ù…Ù„Ø®Øµ Ø§Ù„ÙŠÙˆÙ…</h5>
          <p id="summaryText" class="mb-3">
            Ø§Ù„Ù…Ù‡Ø§Ù… Ø§Ù„Ù…ØªÙƒØ±Ø±Ø©: ${tasks.filter(t => t.recurring).length} | Ù…Ù‡Ø§Ù… Ø§Ù„ÙŠÙˆÙ…: ${nonRecurringTasks.length}
          </p>
          <h6>Ø§Ù„Ù…Ù‡Ø§Ù… Ø§Ù„Ù…ØªÙƒØ±Ø±Ø©</h6>
          <div id="recurringTasksList">${recurringHTML}</div>
          <h6 class="mt-3">Ù…Ù‡Ø§Ù… Ø§Ù„ÙŠÙˆÙ…</h6>
          <div id="nonRecurringDashboardTasks">${nonRecurringHTML}</div>
        </div>
      `;
    }

    // Ø¹Ø±Ø¶ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ù‡Ø§Ù… (ØºÙŠØ± Ø§Ù„Ù…ØªÙƒØ±Ø±Ø©) Ù…Ø¹ Ø§Ù„Ø¨Ø­Ø« ÙˆØ§Ù„ÙØ±Ø² ÙˆØ§Ù„ØªØµÙÙŠØ©
    function renderTaskList() {
      const searchTerm = document.getElementById('taskSearch').value.toLowerCase();
      let filteredTasks = tasks.filter(task =>
        !task.recurring && (
          task.name.toLowerCase().includes(searchTerm) ||
          task.category.toLowerCase().includes(searchTerm) ||
          (task.details && task.details.toLowerCase().includes(searchTerm))
        )
      );
      const statusFilter = document.getElementById('filterStatus').value;
      if (statusFilter) {
        filteredTasks = filteredTasks.filter(task => task.status === statusFilter);
      }
      const sortBy = document.getElementById('sortBy').value;
      filteredTasks.sort((a, b) => new Date(a[sortBy]) - new Date(b[sortBy]));
      document.getElementById('allTasks').innerHTML = filteredTasks.map((task, index) => `
        <div class="card task-card shadow-sm mb-3">
          <div class="card-body ${getStatusClass(task.status)}">
            <div class="d-flex justify-content-between align-items-start">
              <div>
                <h5>${task.name}</h5>
                <p>Ø§Ù„ØªØµÙ†ÙŠÙ: ${task.category}</p>
                <p>Ø§Ù„Ø¨Ø¯Ø¡: ${formatDate(task.startDate)}</p>
                <p>Ø§Ù„Ø§Ù†ØªÙ‡Ø§Ø¡: ${formatDate(task.endDate)}</p>
                <p>Ø§Ù„ØªØ³Ù„ÙŠÙ…: ${formatDate(task.deadline)}</p>
                <p>Ø§Ù„ØªÙØ§ØµÙŠÙ„: ${task.details || 'â€”'}</p>
              </div>
              <div class="d-flex flex-column gap-2">
                <select class="form-select" onchange="updateStatus(${tasks.indexOf(task)}, this.value)">
                  <option class="status-red" value="Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¨Ø¯Ø¡" ${task.status === 'Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¨Ø¯Ø¡' ? 'selected' : ''}>Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¨Ø¯Ø¡</option>
                  <option class="status-yellow" value="Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªÙ†ÙÙŠØ°" ${task.status === 'Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªÙ†ÙÙŠØ°' ? 'selected' : ''}>Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªÙ†ÙÙŠØ°</option>
                  <option class="status-green" value="ØªÙ… Ø§Ù„Ø§Ù†ØªÙ‡Ø§Ø¡" ${task.status === 'ØªÙ… Ø§Ù„Ø§Ù†ØªÙ‡Ø§Ø¡' ? 'selected' : ''}>ØªÙ… Ø§Ù„Ø§Ù†ØªÙ‡Ø§Ø¡</option>
                </select>
                <div class="d-flex gap-2">
                  <button onclick="editTask(${tasks.indexOf(task)})" class="btn btn-warning btn-sm">ØªØ¹Ø¯ÙŠÙ„</button>
                  <button onclick="deleteTask(${tasks.indexOf(task)})" class="btn btn-danger btn-sm">Ø­Ø°Ù</button>
                </div>
              </div>
            </div>
          </div>
        </div>
      `).join('');
    }

    function renderTasks() {
      renderDashboard();
      renderTaskList();
    }

    function updateStatus(index, newStatus) {
      tasks[index].status = newStatus;
      saveTasks();
      renderTasks();
    }

    function getStatusClass(status) {
      return {
        'Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¨Ø¯Ø¡': 'status-red',
        'Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªÙ†ÙÙŠØ°': 'status-yellow',
        'ØªÙ… Ø§Ù„Ø§Ù†ØªÙ‡Ø§Ø¡': 'status-green'
      }[status];
    }

    function formatDate(dateString) {
      if (!dateString) return 'â€”';
      const options = { year: 'numeric', month: 'numeric', day: 'numeric', hour: '2-digit', minute: '2-digit' };
      return new Date(dateString).toLocaleString('ar-EG', options);
    }

    function deleteTask(index) {
      tasks.splice(index, 1);
      saveTasks();
      renderTasks();
    }

    function editTask(index) {
      const task = tasks[index];
      document.getElementById('taskName').value = task.name;
      document.getElementById('taskCategory').value = task.category;
      document.getElementById('taskDetails').value = task.details || '';
      document.getElementById('taskRecurring').checked = task.recurring || false;
      if (task.recurring) {
        document.getElementById('nonRecurringFields').style.display = 'none';
      } else {
        document.getElementById('nonRecurringFields').style.display = 'flex';
        document.getElementById('startDate').value = task.startDate;
        document.getElementById('endDate').value = task.endDate;
        document.getElementById('deadline').value = task.deadline;
        document.getElementById('taskStatus').value = task.status;
      }
      editIndex = index;
      document.getElementById('submitBtn').textContent = 'ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…Ù‡Ù…Ø©';
      document.getElementById('formTitle').textContent = 'ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…Ù‡Ù…Ø©';
      document.getElementById('cancelEditBtn').style.display = 'inline-block';
    }

    // Ø¹Ù†Ø¯ Ø§Ù„Ù†Ù‚Ø± Ø¹Ù„Ù‰ ØªØ´ÙŠÙƒ Ø¨ÙˆÙƒØ³ Ø§Ù„Ù…Ù‡Ù…Ø© Ø§Ù„Ù…ØªÙƒØ±Ø±Ø© ÙŠØªÙ… ØªØºÙŠÙŠØ± Ø­Ø§Ù„ØªÙ‡Ø§ ÙˆØªØ·Ø¨ÙŠÙ‚ ØªØ£Ø«ÙŠØ± Ø§Ù„Ø´Ø®Ø¨Ø·Ø©
    function toggleRecurring(index) {
      tasks[index].completed = !tasks[index].completed;
      saveTasks();
      renderTasks();
    }

    // ØªØºÙŠÙŠØ± Ø¸Ù‡ÙˆØ± Ø§Ù„Ø­Ù‚ÙˆÙ„ Ø§Ù„Ø®Ø§ØµØ© Ø¨Ø§Ù„Ù…Ù‡Ø§Ù… ØºÙŠØ± Ø§Ù„Ù…ØªÙƒØ±Ø±Ø© Ø¹Ù†Ø¯ ØªØ­Ø¯ÙŠØ¯ Ø®ÙŠØ§Ø± Ø§Ù„Ù…Ù‡Ù…Ø© Ø§Ù„Ù…ØªÙƒØ±Ø±Ø©
    document.getElementById('taskRecurring').addEventListener('change', function() {
      if (this.checked) {
        document.getElementById('nonRecurringFields').style.display = 'none';
      } else {
        document.getElementById('nonRecurringFields').style.display = 'flex';
      }
    });

    document.getElementById('cancelEditBtn').addEventListener('click', () => {
      editIndex = -1;
      document.getElementById('taskForm').reset();
      document.getElementById('submitBtn').textContent = 'Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ù‡Ù…Ø©';
      document.getElementById('formTitle').textContent = 'Ø¥Ø¶Ø§ÙØ© Ù…Ù‡Ù…Ø© Ø¬Ø¯ÙŠØ¯Ø©';
      document.getElementById('cancelEditBtn').style.display = 'none';
      document.getElementById('nonRecurringFields').style.display = 'flex';
    });

    document.getElementById('taskForm').addEventListener('submit', (e) => {
      e.preventDefault();
      const recurring = document.getElementById('taskRecurring').checked;
      let newTask;
      if (recurring) {
        newTask = {
          name: document.getElementById('taskName').value,
          category: document.getElementById('taskCategory').value,
          details: document.getElementById('taskDetails').value,
          recurring: true,
          completed: false
        };
      } else {
        newTask = {
          name: document.getElementById('taskName').value,
          category: document.getElementById('taskCategory').value,
          details: document.getElementById('taskDetails').value,
          startDate: document.getElementById('startDate').value,
          endDate: document.getElementById('endDate').value,
          deadline: document.getElementById('deadline').value,
          status: document.getElementById('taskStatus').value,
          recurring: false
        };
      }
      if (editIndex > -1) {
        tasks[editIndex] = newTask;
        editIndex = -1;
        document.getElementById('submitBtn').textContent = 'Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ù‡Ù…Ø©';
        document.getElementById('formTitle').textContent = 'Ø¥Ø¶Ø§ÙØ© Ù…Ù‡Ù…Ø© Ø¬Ø¯ÙŠØ¯Ø©';
        document.getElementById('cancelEditBtn').style.display = 'none';
      } else {
        tasks.push(newTask);
      }
      saveTasks();
      renderTasks();
      e.target.reset();
      document.getElementById('nonRecurringFields').style.display = 'flex';
    });

    document.getElementById('taskSearch').addEventListener('input', renderTaskList);
    document.getElementById('filterStatus').addEventListener('change', renderTaskList);
    document.getElementById('sortBy').addEventListener('change', renderTaskList);
    document.getElementById('clearTasksBtn').addEventListener('click', () => {
      if (confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ù…Ø³Ø­ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ù‡Ø§Ù…ØŸ')) {
        tasks = [];
        saveTasks();
        renderTasks();
      }
    });

    renderTasks();
  </script>
</body>
</html>